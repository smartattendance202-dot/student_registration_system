# دليل استضافة ونشر نظام تسجيل الطلاب

## مقدمة

هذا الدليل يوضح كيفية استضافة ونشر تطبيق نظام تسجيل الطلاب على منصة Heroku. التطبيق مبني باستخدام Flask (Python) ويحتاج إلى بيئة تشغيل معينة.

## المتطلبات الأساسية

1. حساب على GitHub (لديك حساب بالفعل)
2. حساب على Heroku ( gratuito)
3. تثبيت Git على جهازك

## خطوات النشر على Heroku

### 1. إنشاء حساب على Heroku

1. اذهب إلى [https://heroku.com](https://heroku.com)
2. أنشئ حساب جديد أو سجل دخولك إذا كان لديك حساب

### 2. إنشاء تطبيق جديد على Heroku

1. بعد تسجيل الدخول، اضغط على "New" ثم "Create new app"
2. اختر اسماً فريداً لتطبيقك (مثلاً: student-registration-system-unique)
3. اختر المنطقة (United States أو Europe)
4. اضغط على "Create app"

### 3. إعداد المتغيرات السرية في GitHub

1. احصل على مفتاح API من Heroku:
   - في لوحة تحكم Heroku، اضغط على اسم حسابك في الزاوية العلوية اليمنى
   - اختر "Account settings"
   - انزل إلى قسم "API Key"
   - انسخ المفتاح

2. أضف المتغيرات السرية في إعدادات المستودع على GitHub:
   - اذهب إلى مستودعك على GitHub
   - اضغط على "Settings"
   - في القائمة الجانبية اختر "Secrets and variables" ثم "Actions"
   - أضف المتغيرات التالية:
     - `HEROKU_API_KEY`: المفتاح الذي نسخته من Heroku
     - `HEROKU_APP_NAME`: اسم التطبيق الذي أنشأته على Heroku
     - `HEROKU_EMAIL`: البريد الإلكتروني لحسابك على Heroku

### 4. تشغيل عملية النشر تلقائياً

بما أننا أضفنا ملف GitHub Actions.workflow، فإن النشر سيحدث تلقائياً عند كل تحديث لفرع main.

لتشغيل النشر يدوياً:
1. اذهب إلى تبويب "Actions" في مستودعك على GitHub
2. اختر "Deploy to Heroku" من القائمة الجانبية
3. اضغط على "Run workflow"

### 5. تتبع عملية النشر

1. انتقل إلى تبويب "Actions" في مستودعك على GitHub
2. اختر عملية النشر الجارية أو السابقة
3. راقب سجل التنفيذ لمتابعة تقدم النشر

## إعدادات إضافية

### إعداد اسم نطاق مخصص (اختياري)

1. في لوحة تحكم Heroku، اختر تطبيقك
2. انتقل إلى تبويب "Settings"
3. انزل إلى قسم "Domains"
4. أضف النطاق المخصص الخاص بك

### إعداد قاعدة بيانات (Production)

للاستخدام الفعلي، يجب تغيير قاعدة البيانات من SQLite إلى MySQL أو PostgreSQL:

1. أضف إضافة قاعدة بيانات على Heroku (مثل Heroku Postgres)
2. حدث متغير البيئة `SQLALCHEMY_DATABASE_URI` في إعدادات Heroku

## معلومات مهمة

### متغيرات البيئة

يجب تعيين المتغيرات التالية في إعدادات Heroku:
- `SECRET_KEY`: مفتاح سري لتطبيق Flask
- `FLASK_ENV`: اضبطه على "production"
- `FLASK_DEBUG`: اضبطه على "False"

### قيود Heroku

- Heroku تستخدم نظام ملفات مؤقت، مما يعني أن أي ملفات يتم رفعها ستُحذف عند إعادة تشغيل التطبيق
- لحل هذه المشكلة، يجب استخدام خدمات تخزين خارجية مثل AWS S3

## استكشاف الأخطاء وإصلاحها

### إذا فشلت عملية النشر

1. تحقق من سجلات GitHub Actions
2. تأكد من صحة المتغيرات السرية
3. تحقق من أن جميع الملفات المطلوبة موجودة

### إذا لم يعمل التطبيق بعد النشر

1. راجع سجلات التطبيق على Heroku:
   ```bash
   heroku logs --app اسم-التطبيق-على-heroku
   ```
2. تأكد من أن جميع المتطلبات مثبتة بشكل صحيح
3. تحقق من متغيرات البيئة المطلوبة

## تحديث التطبيق

لتحديث التطبيق:
1. قم بإجراء التغييرات على الكود
2. ارفع التغييرات إلى GitHub:
   ```bash
   git add .
   git commit -m "وصف التحديث"
   git push origin main
   ```
3. سيبدأ النشر التلقائي عبر GitHub Actions

## معلومات الاتصال

للحصول على المساعدة:
- راجع هذا الدليل
- تحقق من سجلات GitHub Actions
- راجع وثائق Heroku الرسمية